# Task to solve:
{task_content}

# Original Program to rewrite:
```python
{original_program}
```

# Style Guide to follow:
{style_guide}

## Your Task:
Rewrite the original program above following these requirements:

1. **Maintain exact functionality** - Your rewritten program must produce identical outputs to the original program for all training and test cases shown above
2. **Follow the style guide** - Apply all the coding standards, naming conventions, and best practices from the style guide
3. **Improve code clarity** - Make the code more readable and maintainable while preserving behavior
4. **Use proper structure** - Organize the code with appropriate helper functions, clear variable names, and proper imports

## Analysis Steps:
1. **Understand** what transformation the original program performs on the input grids
2. **Identify** areas where the original code can be improved according to the style guide
3. **Rewrite** the program with better structure, naming, and practices
4. **Verify** your rewritten program produces the same outputs for the given examples
5. **Ensure** the code follows all style guide recommendations

Your rewritten program should be functionally identical to the original but with significantly improved code quality, readability, and adherence to the style guide.