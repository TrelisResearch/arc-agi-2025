# Fine-tuning configuration for ARC-AGI model
# This file can be modified for different experiment runs

# Test mode - set to true for quick test runs with only 128 rows of data.
test_run: true

# Environment - set true for Kaggle.
is_local: false

# will be overridden by environment variable LOCAL_MODEL_DIR if it exists 
local_model_dir: "/kaggle/working/"

# Model configuration
model:
  slug: "Qwen/Qwen3-4B"
  # Alternative models:
  # slug: "julien31/Soar-qwen-7b"
  # slug: "Qwen/Qwen2.5-Coder-7B-Instruct"
  # slug: "Qwen/Qwen3-30B-A3B"
  
  max_length: 32768  # Max eval set ~19,400 tokens + headroom
  lora_rank: 128

# Training configuration
training:
  batch_size_global: 4  # Can use 32 for Qwen3-4b
  max_rows: null  # Set to integer to limit training data, null for all
  dataset_slug: "Trelis/arc-agi-1-perfect-50"
  enable_thinking: false  # Required for training qwen base model

# Override max_rows when in test mode
overrides:
  test_run_max_rows: 128  # 32*4 rows for test runs